# codemusic generator

Вход: 
1. stdin-поток - базовое определение правил
2. ELEMENTS_DIR - каталог с правилами которые надо загрузить.
можно указать несколько через запятую.

Выход:
1. stdout - текст с результатом трансляции
2. Дополнительное воздействие на систему, например создание файлов ресурсов.

## Алгоритм

1. Прочитать правила из файлов `ELEMENTS_DIR/**/*.cm` и записать в словарь p1
2. Прочитать правила из файлов `ELEMENTS_DIR/**/*.cm` и записать в словарь p2
3. Прочитать правила из stdin в p1
4. Вызвать вычисление `main` на словаре p1, результат записать в r
5. Вызвать вычисление r как есть, результат выдать на stdout.

Подразумевается, что правила p1 формируют некое объектное представление целевой
программы в памяти. А правила p2 переводят эту программу в целевой язык.

Таким образом, имея хороший набор p1 и p2, можно писать что угодно на каком-нибудь
языке и подавать на stdin, а затем получать на целевом языке результат.
Заменив же p1 и p2, получаем другой результат для того же stdin.

## Прочее
Также можно задавать переменную TARGET_DIR - каталог для записи файлов ресурсов.

## Язык правил
См (parser)[../parser/README.md]
